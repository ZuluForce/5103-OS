\hypertarget{classcMMU}{\section{c\-M\-M\-U \-Class \-Reference}
\label{df/deb/classcMMU}\index{c\-M\-M\-U@{c\-M\-M\-U}}
}


\-Class representing an \-M\-M\-U in the \-C\-P\-U.  




{\ttfamily \#include $<$mmu.\-h$>$}



\-Collaboration diagram for c\-M\-M\-U\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/d5d/classcMMU__coll__graph}
\end{center}
\end{figure}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classcMMU_a1fadf507689a62a0a28ea10734bdfcca}{set\-P\-T\-B\-R} (\hyperlink{structsPTE}{s\-P\-T\-E} $\ast$\-\_\-ptbr)
\begin{DoxyCompactList}\small\item\em \-Set the \-Page \-Table \-Base \-Register. \end{DoxyCompactList}\item 
\hypertarget{classcMMU_a043b4dce463c5379e1885a5918103286}{void \hyperlink{classcMMU_a043b4dce463c5379e1885a5918103286}{add\-V\-C} (int $\ast$\-V\-C)}\label{df/deb/classcMMU_a043b4dce463c5379e1885a5918103286}

\begin{DoxyCompactList}\small\item\em \-Add a refernece to the main \-V\-C\-C for timekeeping purposes. \end{DoxyCompactList}\item 
void \hyperlink{classcMMU_ad46f9d2c75a2fac3b0b7154e864345ab}{flush\-T\-L\-B} (bool sync=true)
\begin{DoxyCompactList}\small\item\em \-Flush the tlb and optionally sync values back to page table. \end{DoxyCompactList}\item 
void \hyperlink{classcMMU_ae981abbf574849c2d83c2402212c3d24}{sync\-T\-L\-B} ()
\begin{DoxyCompactList}\small\item\em \-Sync \-T\-L\-B entries without flushing them. \end{DoxyCompactList}\item 
\hyperlink{mmu_8h_ae08a7145dbbab15abf6cd31e4958d861}{e\-M\-M\-Ustate} \hyperlink{classcMMU_ac0b382b3495595d8b4784835c9d73515}{check\-Status} ()
\begin{DoxyCompactList}\small\item\em \-What is the \-M\-M\-U status after the last translation. \end{DoxyCompactList}\item 
uint32\-\_\-t \hyperlink{classcMMU_ab906b5a3693545e3d7fbdab5d1b3a397}{get\-Fault\-Page} ()
\begin{DoxyCompactList}\small\item\em \-What was the \-V\-P\-N that caused the fault. \end{DoxyCompactList}\item 
uint32\-\_\-t \hyperlink{classcMMU_a8f67a55d3444b1164999ef64253eb37e}{get\-Addr} (string \&s\-V\-A, bool is\-Write)
\begin{DoxyCompactList}\small\item\em \-Translate virtual to physical address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Private \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcMMU_a3344e754b5752bd079787ee5a7328bbf}{void \hyperlink{classcMMU_a3344e754b5752bd079787ee5a7328bbf}{add\-T\-L\-B} (uint32\-\_\-t, uint32\-\_\-t, bool)}\label{df/deb/classcMMU_a3344e754b5752bd079787ee5a7328bbf}

\begin{DoxyCompactList}\small\item\em \-Add an entry to the \-T\-L\-B. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Private \-Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcMMU_a0d648c0b2700336ccd048d338e3c0f40}{\hyperlink{structsTLBE}{s\-T\-L\-B\-E} $\ast$ {\bfseries \-T\-L\-B}}\label{df/deb/classcMMU_a0d648c0b2700336ccd048d338e3c0f40}

\item 
\hypertarget{classcMMU_a33bae6bddbaa164c3c8bec3369dac99e}{uint16\-\_\-t {\bfseries tlb\-Size}}\label{df/deb/classcMMU_a33bae6bddbaa164c3c8bec3369dac99e}

\item 
\hypertarget{classcMMU_a518605a6810c2db0e4c3c6118d68eecd}{uint32\-\_\-t {\bfseries page\-Size}}\label{df/deb/classcMMU_a518605a6810c2db0e4c3c6118d68eecd}

\item 
\hypertarget{classcMMU_a00cef287ae02c5007a3462d833b2aaaa}{uint32\-\_\-t {\bfseries off\-\_\-bits}}\label{df/deb/classcMMU_a00cef287ae02c5007a3462d833b2aaaa}

\item 
\hypertarget{classcMMU_ac747da0e08fa4988c1f1d6c0b89ec304}{bool {\bfseries hex\-Addr}}\label{df/deb/classcMMU_ac747da0e08fa4988c1f1d6c0b89ec304}

\item 
\hypertarget{classcMMU_a3a3f41d64f9d10bcd75d04553c7d2fbb}{stringstream {\bfseries ss\-Addr}}\label{df/deb/classcMMU_a3a3f41d64f9d10bcd75d04553c7d2fbb}

\item 
uint32\-\_\-t \hyperlink{classcMMU_a90cbcd50347e8b9030f66bce2fc52e2a}{replace\-Index}
\begin{DoxyCompactList}\small\item\em \-For replacing old tlb entries we are simply treating it as a ring buffer. \end{DoxyCompactList}\item 
\hypertarget{classcMMU_a32b0fcd59b1afd0a73170cc6f10b4e8e}{int $\ast$ {\bfseries \-V\-C}}\label{df/deb/classcMMU_a32b0fcd59b1afd0a73170cc6f10b4e8e}

\item 
\hypertarget{classcMMU_ac2cb598634fc88375313eac3d9ec9348}{\hyperlink{structsPTE}{s\-P\-T\-E} $\ast$ {\bfseries ptbr}}\label{df/deb/classcMMU_ac2cb598634fc88375313eac3d9ec9348}

\item 
\hypertarget{classcMMU_ad127c2a2928e67b8a201319e00215d86}{int {\bfseries tlb\-\_\-hits}}\label{df/deb/classcMMU_ad127c2a2928e67b8a201319e00215d86}

\item 
\hypertarget{classcMMU_af9b299f41ac146cca9982cd2768b3945}{int {\bfseries tlb\-\_\-misses}}\label{df/deb/classcMMU_af9b299f41ac146cca9982cd2768b3945}

\item 
\hypertarget{classcMMU_a593631c8752611c58c8ddd5a82f24d9e}{\hyperlink{mmu_8h_ae08a7145dbbab15abf6cd31e4958d861}{e\-M\-M\-Ustate} {\bfseries mmu\-\_\-status}}\label{df/deb/classcMMU_a593631c8752611c58c8ddd5a82f24d9e}

\item 
\hypertarget{classcMMU_a719786f4271afae04e95286bf9bcdd81}{uint32\-\_\-t {\bfseries fault\-Page}}\label{df/deb/classcMMU_a719786f4271afae04e95286bf9bcdd81}

\end{DoxyCompactItemize}


\subsection{\-Member \-Function \-Documentation}
\hypertarget{classcMMU_ac0b382b3495595d8b4784835c9d73515}{\index{c\-M\-M\-U@{c\-M\-M\-U}!check\-Status@{check\-Status}}
\index{check\-Status@{check\-Status}!cMMU@{c\-M\-M\-U}}
\subsubsection[{check\-Status}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-M\-M\-U\-::check\-Status} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{df/deb/classcMMU_ac0b382b3495595d8b4784835c9d73515}
\-Since the get\-Addr function returns the translated address. \-With the exception of doing some bit packing we can't return the status in the same variable. 

\-Referenced by c\-C\-P\-U\-::run().

\hypertarget{classcMMU_ad46f9d2c75a2fac3b0b7154e864345ab}{\index{c\-M\-M\-U@{c\-M\-M\-U}!flush\-T\-L\-B@{flush\-T\-L\-B}}
\index{flush\-T\-L\-B@{flush\-T\-L\-B}!cMMU@{c\-M\-M\-U}}
\subsubsection[{flush\-T\-L\-B}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-M\-M\-U\-::flush\-T\-L\-B} (
\begin{DoxyParamCaption}
\item[{bool}]{sync = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{df/deb/classcMMU_ad46f9d2c75a2fac3b0b7154e864345ab}
\-On context switch this is called to clear all the entries by simply setting their valid bit to false. \-If the sync flag is set and a page is dirty/referenced then this information is written back to the main page table.

\-This syncing is usually not necessary since the cpu calls sync on a page fault or quanta terminnation so that the table is up-\/to-\/date for the \-P\-R module to make decisions. 

\-Referenced by c\-C\-P\-U\-::switch\-Proc().

\hypertarget{classcMMU_a8f67a55d3444b1164999ef64253eb37e}{\index{c\-M\-M\-U@{c\-M\-M\-U}!get\-Addr@{get\-Addr}}
\index{get\-Addr@{get\-Addr}!cMMU@{c\-M\-M\-U}}
\subsubsection[{get\-Addr}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t {\bf c\-M\-M\-U\-::get\-Addr} (
\begin{DoxyParamCaption}
\item[{string \&}]{s\-V\-A, }
\item[{bool}]{is\-Write}
\end{DoxyParamCaption}
)}}\label{df/deb/classcMMU_a8f67a55d3444b1164999ef64253eb37e}
\-This method checks the tlb and page table simultaneously and returns the appropriate address. \-Whoever receives this should first check the mmu status to make sure it is valid.


\begin{DoxyParams}{\-Parameters}
{\em bool} & write \-If set, the mmu will mark this page as dirty. \\
\hline
\end{DoxyParams}


\-Referenced by c\-C\-P\-U\-::run().

\hypertarget{classcMMU_ab906b5a3693545e3d7fbdab5d1b3a397}{\index{c\-M\-M\-U@{c\-M\-M\-U}!get\-Fault\-Page@{get\-Fault\-Page}}
\index{get\-Fault\-Page@{get\-Fault\-Page}!cMMU@{c\-M\-M\-U}}
\subsubsection[{get\-Fault\-Page}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-M\-M\-U\-::get\-Fault\-Page} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{df/deb/classcMMU_ab906b5a3693545e3d7fbdab5d1b3a397}
\-The cpu calls this to send back to the \-V\-M\-M core so it can handle it accordingly. 

\-Referenced by c\-C\-P\-U\-::get\-Fault\-Page().

\hypertarget{classcMMU_a1fadf507689a62a0a28ea10734bdfcca}{\index{c\-M\-M\-U@{c\-M\-M\-U}!set\-P\-T\-B\-R@{set\-P\-T\-B\-R}}
\index{set\-P\-T\-B\-R@{set\-P\-T\-B\-R}!cMMU@{c\-M\-M\-U}}
\subsubsection[{set\-P\-T\-B\-R}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-M\-M\-U\-::set\-P\-T\-B\-R} (
\begin{DoxyParamCaption}
\item[{{\bf s\-P\-T\-E} $\ast$}]{\-\_\-ptbr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{df/deb/classcMMU_a1fadf507689a62a0a28ea10734bdfcca}
\-This needs to be reset on context switch 

\-Referenced by c\-C\-P\-U\-::switch\-Proc().

\hypertarget{classcMMU_ae981abbf574849c2d83c2402212c3d24}{\index{c\-M\-M\-U@{c\-M\-M\-U}!sync\-T\-L\-B@{sync\-T\-L\-B}}
\index{sync\-T\-L\-B@{sync\-T\-L\-B}!cMMU@{c\-M\-M\-U}}
\subsubsection[{sync\-T\-L\-B}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-M\-M\-U\-::sync\-T\-L\-B} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{df/deb/classcMMU_ae981abbf574849c2d83c2402212c3d24}
\-This is the same as \-::fulsh\-T\-L\-B with the exception of not flushing/ invalidating the table entries. \-This is useful when an execution quanta finishes so you want to sync the entries but not flush them in-\/case it is the only process left. 

\-Referenced by c\-C\-P\-U\-::run().



\subsection{\-Member \-Data \-Documentation}
\hypertarget{classcMMU_a90cbcd50347e8b9030f66bce2fc52e2a}{\index{c\-M\-M\-U@{c\-M\-M\-U}!replace\-Index@{replace\-Index}}
\index{replace\-Index@{replace\-Index}!cMMU@{c\-M\-M\-U}}
\subsubsection[{replace\-Index}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t {\bf c\-M\-M\-U\-::replace\-Index}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{df/deb/classcMMU_a90cbcd50347e8b9030f66bce2fc52e2a}
\-This is the index where new entries are being placed 

\-Referenced by add\-T\-L\-B(), and flush\-T\-L\-B().



\-The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{mmu_8h}{mmu.\-h}\item 
src/mmu.\-cpp\end{DoxyCompactItemize}
