\hypertarget{classcIOControl}{\section{c\-I\-O\-Control \-Class \-Reference}
\label{da/d8f/classcIOControl}\index{c\-I\-O\-Control@{c\-I\-O\-Control}}
}


\-Class representing an \-I/\-O controller.  




{\ttfamily \#include $<$io\-\_\-control.\-h$>$}



\-Collaboration diagram for c\-I\-O\-Control\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/db8/classcIOControl__coll__graph}
\end{center}
\end{figure}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcIOControl_aefe59221a4ffc9df0973e468febf013b}{\hyperlink{classcIOControl_aefe59221a4ffc9df0973e468febf013b}{c\-I\-O\-Control} (int num\-Procs, int $\ast$\-V\-C)}\label{da/d8f/classcIOControl_aefe59221a4ffc9df0973e468febf013b}

\begin{DoxyCompactList}\small\item\em \-Reference virtual counter in core. \end{DoxyCompactList}\item 
queue$<$ uint64\-\_\-t $>$ \& \hyperlink{classcIOControl_a7765e006a0403642713469f9674a1dd3}{get\-Finished\-Queue} ()
\begin{DoxyCompactList}\small\item\em \-Get a reference to the finished queue. \end{DoxyCompactList}\item 
queue$<$ \hyperlink{structsPTE}{s\-P\-T\-E} $\ast$ $>$ \& \hyperlink{classcIOControl_a72bbe2fda30108727eab840aede31b42}{get\-Finished\-P\-T\-E\-Queue} ()
\begin{DoxyCompactList}\small\item\em \-Get a reference to the finished \-P\-T\-E queue. \end{DoxyCompactList}\item 
void \hyperlink{classcIOControl_a820f361e69d99d0da35ebf448643d54a}{tick} ()
\begin{DoxyCompactList}\small\item\em \-Count 1 time unit. \end{DoxyCompactList}\item 
void \hyperlink{classcIOControl_a85b87b93a0b52ba7aa5c3b764f58903d}{tick} (int times)
\begin{DoxyCompactList}\small\item\em \-This executes \-::tick() \-N number of times. \end{DoxyCompactList}\item 
\hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ \hyperlink{classcIOControl_a47ac21dd888187a969eec853b7256a83}{schedule\-I\-O} (\hyperlink{structsProc}{s\-Proc} $\ast$proc, uint32\-\_\-t page, e\-I\-O\-Type iotype, \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$release=\-N\-U\-L\-L)
\begin{DoxyCompactList}\small\item\em \-Schedule an \-I/\-O event. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Private \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classcIOControl_a235b0bd1459463529e1a0b9f07f25ccb}{remove\-Wait} (uint32\-\_\-t)
\begin{DoxyCompactList}\small\item\em \-Remove an \-I/\-O context from waiting. \end{DoxyCompactList}\item 
\hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ \hyperlink{classcIOControl_a55df5b64418ea644eb23a6198ff13845}{get\-Context} ()
\begin{DoxyCompactList}\small\item\em \-Get a context struct. \end{DoxyCompactList}\item 
void \hyperlink{classcIOControl_abceaee42b9df46c3fdbd4e26f88e9e88}{return\-Context} (\hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ctx)
\begin{DoxyCompactList}\small\item\em \-Return a context struct for future use. \end{DoxyCompactList}\item 
void \hyperlink{classcIOControl_ac0839c4c60b08a2cfa425d3c90d584f3}{dump\-I\-O\-Error} (\hyperlink{structsProc}{s\-Proc} $\ast$)
\begin{DoxyCompactList}\small\item\em \-Generate and throw \-I\-O \-Error. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Private \-Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcIOControl_a4b9aa88be2dc67cf9ed33051dba6eebb}{int {\bfseries io\-\_\-req\-\_\-time}}\label{da/d8f/classcIOControl_a4b9aa88be2dc67cf9ed33051dba6eebb}

\item 
\hypertarget{classcIOControl_aacf61a8d660e60a7e444e32474b7875a}{int {\bfseries io\-\_\-time}}\label{da/d8f/classcIOControl_aacf61a8d660e60a7e444e32474b7875a}

\item 
vector$<$ queue$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$ $>$ \hyperlink{classcIOControl_a51a2c3ce8bf36b9302d835afb204c821}{io\-\_\-out}
\begin{DoxyCompactList}\small\item\em \-What is being paged out? \end{DoxyCompactList}\item 
\hypertarget{classcIOControl_abb546a7c4d622af5e4a95a5742c33b10}{vector$<$ queue$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$\*
 $>$\-::iterator {\bfseries out\-\_\-iter}}\label{da/d8f/classcIOControl_abb546a7c4d622af5e4a95a5742c33b10}

\item 
queue$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$ \hyperlink{classcIOControl_a6918230a2e9f6e1e5fdade78da2d835b}{io\-\_\-in}
\begin{DoxyCompactList}\small\item\em \-What is the next page in? \end{DoxyCompactList}\item 
\hypertarget{classcIOControl_a8e33089e107631ba9cc042d72939d913}{vector$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$ \hyperlink{classcIOControl_a8e33089e107631ba9cc042d72939d913}{io\-\_\-in\-\_\-wait}}\label{da/d8f/classcIOControl_a8e33089e107631ba9cc042d72939d913}

\begin{DoxyCompactList}\small\item\em \-I/\-O in requests waiting for an io\-\_\-out to finish. \end{DoxyCompactList}\item 
\hypertarget{classcIOControl_a3bfc00997effdb1cd33c02bba4a12337}{vector$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$\-::iterator {\bfseries in\-\_\-wait\-\_\-iter}}\label{da/d8f/classcIOControl_a3bfc00997effdb1cd33c02bba4a12337}

\item 
queue$<$ \hyperlink{structsIOContext}{s\-I\-O\-Context} $\ast$ $>$ \hyperlink{classcIOControl_a52a5d360ffc2f48ee75cac0c801642fd}{context\-\_\-cache}
\begin{DoxyCompactList}\small\item\em \-Cache of previously allocated contexts. \end{DoxyCompactList}\item 
queue$<$ uint64\-\_\-t $>$ \hyperlink{classcIOControl_a193b1bb6dd1b919dbf7de9ce02bf56ad}{finished}
\begin{DoxyCompactList}\small\item\em \-Queue that holds process ids that have completed and \-I/\-O. \end{DoxyCompactList}\item 
\hypertarget{classcIOControl_a57a24ad208c4a16e38935c000383a23e}{queue$<$ \hyperlink{structsPTE}{s\-P\-T\-E} $\ast$ $>$ \hyperlink{classcIOControl_a57a24ad208c4a16e38935c000383a23e}{finished\-P\-T\-E}}\label{da/d8f/classcIOControl_a57a24ad208c4a16e38935c000383a23e}

\begin{DoxyCompactList}\small\item\em \-Holds the \-P\-T\-E of finished \-I/\-O in's. \end{DoxyCompactList}\item 
\hypertarget{classcIOControl_aad4dedae2daa73a6d84bba3af1f1dc45}{int $\ast$ {\bfseries \-V\-C}}\label{da/d8f/classcIOControl_aad4dedae2daa73a6d84bba3af1f1dc45}

\end{DoxyCompactItemize}


\subsection{\-Member \-Function \-Documentation}
\hypertarget{classcIOControl_ac0839c4c60b08a2cfa425d3c90d584f3}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!dump\-I\-O\-Error@{dump\-I\-O\-Error}}
\index{dump\-I\-O\-Error@{dump\-I\-O\-Error}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{dump\-I\-O\-Error}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::dump\-I\-O\-Error} (
\begin{DoxyParamCaption}
\item[{{\bf s\-Proc} $\ast$}]{proc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_ac0839c4c60b08a2cfa425d3c90d584f3}
\-This does the work of generating an \-I\-O excetion.\-It was originally intended to work broadly for many different scenarios but the necessity was not there. \-It works but it produces a fairly generic error. 

\-Referenced by schedule\-I\-O().

\hypertarget{classcIOControl_a55df5b64418ea644eb23a6198ff13845}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!get\-Context@{get\-Context}}
\index{get\-Context@{get\-Context}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{get\-Context}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::get\-Context} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a55df5b64418ea644eb23a6198ff13845}
\-If there is a context struct cached from previous use then it is returned. \-Otherwise a new one is allocated. 

\-Referenced by schedule\-I\-O().

\hypertarget{classcIOControl_a72bbe2fda30108727eab840aede31b42}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!get\-Finished\-P\-T\-E\-Queue@{get\-Finished\-P\-T\-E\-Queue}}
\index{get\-Finished\-P\-T\-E\-Queue@{get\-Finished\-P\-T\-E\-Queue}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{get\-Finished\-P\-T\-E\-Queue}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::get\-Finished\-P\-T\-E\-Queue} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{da/d8f/classcIOControl_a72bbe2fda30108727eab840aede31b42}
\-This is called by the core to get a reference to this specific queue to be used in processing finished \-I/\-O. \-The purpose for this queue was that the \-V\-M\-M core needed the frame of the completed \-I/\-O so it could be unpinned. \-Given the \-P\-T\-E in this queue it makes page data in the finished queue redundant. 

\-Referenced by c\-V\-M\-M\-::start().

\hypertarget{classcIOControl_a7765e006a0403642713469f9674a1dd3}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!get\-Finished\-Queue@{get\-Finished\-Queue}}
\index{get\-Finished\-Queue@{get\-Finished\-Queue}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{get\-Finished\-Queue}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::get\-Finished\-Queue} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}\label{da/d8f/classcIOControl_a7765e006a0403642713469f9674a1dd3}
\-This is called by the core to get a refernce to this specific queue so it can be used in processing finished \-I/\-O. \-This queue hold 64-\/bit integers representing the pid and page of for the completed \-I/\-O. 

\-Referenced by c\-V\-M\-M\-::start().

\hypertarget{classcIOControl_a235b0bd1459463529e1a0b9f07f25ccb}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!remove\-Wait@{remove\-Wait}}
\index{remove\-Wait@{remove\-Wait}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{remove\-Wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::remove\-Wait} (
\begin{DoxyParamCaption}
\item[{uint32\-\_\-t}]{pid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a235b0bd1459463529e1a0b9f07f25ccb}
\-When an \-I/\-O out completes, if its release context property is not null then the controller will try to release the specified context from the waiting vector. 

\-Referenced by tick().

\hypertarget{classcIOControl_abceaee42b9df46c3fdbd4e26f88e9e88}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!return\-Context@{return\-Context}}
\index{return\-Context@{return\-Context}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{return\-Context}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::return\-Context} (
\begin{DoxyParamCaption}
\item[{{\bf s\-I\-O\-Context} $\ast$}]{ctx}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_abceaee42b9df46c3fdbd4e26f88e9e88}
\-The struct is not deallocated. \-It is put into a cache queue. 

\-Referenced by tick().

\hypertarget{classcIOControl_a47ac21dd888187a969eec853b7256a83}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!schedule\-I\-O@{schedule\-I\-O}}
\index{schedule\-I\-O@{schedule\-I\-O}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{schedule\-I\-O}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::schedule\-I\-O} (
\begin{DoxyParamCaption}
\item[{{\bf s\-Proc} $\ast$}]{proc, }
\item[{uint32\-\_\-t}]{page, }
\item[{e\-I\-O\-Type}]{iotype, }
\item[{{\bf s\-I\-O\-Context} $\ast$}]{release = {\ttfamily \-N\-U\-L\-L}}
\end{DoxyParamCaption}
)}}\label{da/d8f/classcIOControl_a47ac21dd888187a969eec853b7256a83}
\-Schedule \-I/\-O.

\-This is used to schedule some \-I/\-O. \-The type is specified by the e\-I\-O\-Type parameter. \-If the type is e\-I\-O\-Type\-::\-I\-O\-\_\-\-I\-N\-\_\-\-W\-A\-I\-T it will be put in a vector (indexed by pid) waiting to be released. \-If the type is e\-I\-O\-Type\-::\-I\-O\-\_\-\-O\-U\-T and the s\-I\-O\-Context$\ast$ != \-N\-U\-L\-L then after the \-I/\-O completes it will relese the \-I/\-O pointed to by this context. 

\-Referenced by c\-V\-M\-M\-::page\-In(), and c\-V\-M\-M\-::page\-Out().

\hypertarget{classcIOControl_a820f361e69d99d0da35ebf448643d54a}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!tick@{tick}}
\index{tick@{tick}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{tick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::tick} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{da/d8f/classcIOControl_a820f361e69d99d0da35ebf448643d54a}
\-Thiscounts 1 virtual time unite and modifies the remaining time on pending \-I/\-O correspondingly. 

\-Referenced by schedule\-I\-O(), c\-V\-M\-M\-::start(), tick(), and c\-V\-M\-M\-::tick\-Controller().

\hypertarget{classcIOControl_a85b87b93a0b52ba7aa5c3b764f58903d}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!tick@{tick}}
\index{tick@{tick}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{tick}]{\setlength{\rightskip}{0pt plus 5cm}{\bf c\-I\-O\-Control\-::tick} (
\begin{DoxyParamCaption}
\item[{int}]{times}
\end{DoxyParamCaption}
)}}\label{da/d8f/classcIOControl_a85b87b93a0b52ba7aa5c3b764f58903d}
\-This is useful in recording virtual time with events that take chunks of time such as the context switching of a process.


\begin{DoxyParams}{\-Parameters}
{\em int} & \-Number of ticks to execute. \\
\hline
\end{DoxyParams}


\subsection{\-Member \-Data \-Documentation}
\hypertarget{classcIOControl_a52a5d360ffc2f48ee75cac0c801642fd}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!context\-\_\-cache@{context\-\_\-cache}}
\index{context\-\_\-cache@{context\-\_\-cache}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{context\-\_\-cache}]{\setlength{\rightskip}{0pt plus 5cm}queue$<${\bf s\-I\-O\-Context}$\ast$$>$ {\bf c\-I\-O\-Control\-::context\-\_\-cache}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a52a5d360ffc2f48ee75cac0c801642fd}
\-This is simply a performance boost to avoid constantly allocating/deallocating context structs. 

\-Referenced by get\-Context(), and return\-Context().

\hypertarget{classcIOControl_a193b1bb6dd1b919dbf7de9ce02bf56ad}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!finished@{finished}}
\index{finished@{finished}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{finished}]{\setlength{\rightskip}{0pt plus 5cm}queue$<$uint64\-\_\-t$>$ {\bf c\-I\-O\-Control\-::finished}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a193b1bb6dd1b919dbf7de9ce02bf56ad}
\-This is specifically used for completed page ins. \-After calling tick, any completed processes are placed in here and the \-V\-M\-M core can read it and unblock.

\-I made it a 64-\/bit data type so that \-I didn't need to mess with allocating and managing some other structure. \-The first 32-\/bits represent the pid of the process whose \-I/\-O completed. \-The last 32-\/bits is the page that was brought in for the process. \-From this the core can get the frame and unpin it. 

\-Referenced by tick().

\hypertarget{classcIOControl_a6918230a2e9f6e1e5fdade78da2d835b}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!io\-\_\-in@{io\-\_\-in}}
\index{io\-\_\-in@{io\-\_\-in}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{io\-\_\-in}]{\setlength{\rightskip}{0pt plus 5cm}queue$<${\bf s\-I\-O\-Context}$\ast$$>$ {\bf c\-I\-O\-Control\-::io\-\_\-in}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a6918230a2e9f6e1e5fdade78da2d835b}
\-This keeps track of the next page to complete its \-I/\-O. 

\-Referenced by remove\-Wait(), schedule\-I\-O(), and tick().

\hypertarget{classcIOControl_a51a2c3ce8bf36b9302d835afb204c821}{\index{c\-I\-O\-Control@{c\-I\-O\-Control}!io\-\_\-out@{io\-\_\-out}}
\index{io\-\_\-out@{io\-\_\-out}!cIOControl@{c\-I\-O\-Control}}
\subsubsection[{io\-\_\-out}]{\setlength{\rightskip}{0pt plus 5cm}vector$<$queue$<${\bf s\-I\-O\-Context}$\ast$$>$ $>$ {\bf c\-I\-O\-Control\-::io\-\_\-out}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{da/d8f/classcIOControl_a51a2c3ce8bf36b9302d835afb204c821}
\-This vector is indexed by pid and it holds a queue of the pages of the respective process which are being paged out. \-This is so that in the case that a process has a page spilled by some other process' page fault or the cleaning daemon, it is prevented from recovering the page until it is successfully written out. 

\-Referenced by c\-I\-O\-Control(), schedule\-I\-O(), and tick().



\-The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/io\-\_\-control.\-h\item 
src/io\-\_\-control.\-cpp\end{DoxyCompactItemize}
