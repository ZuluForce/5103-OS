\hypertarget{classcCharDevice}{\section{c\-Char\-Device \-Class \-Reference}
\label{d9/de9/classcCharDevice}\index{c\-Char\-Device@{c\-Char\-Device}}
}


\-Queued char device.  




{\ttfamily \#include $<$char\-\_\-device.\-h$>$}



\-Inheritance diagram for c\-Char\-Device\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=184pt]{d9/dc1/classcCharDevice__inherit__graph}
\end{center}
\end{figure}


\-Collaboration diagram for c\-Char\-Device\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{de/d1a/classcCharDevice__coll__graph}
\end{center}
\end{figure}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcCharDevice_a2b47487b6c2f6b918281afae840158a4}{{\bfseries c\-Char\-Device} (int usec)}\label{d9/de9/classcCharDevice_a2b47487b6c2f6b918281afae840158a4}

\item 
void \hyperlink{classcCharDevice_a62b7bd4cb53a35f70798ec18d0340c1e}{set\-Default\-Time} (int usec)
\begin{DoxyCompactList}\small\item\em \-Set the default timer length for this device. \end{DoxyCompactList}\item 
void \hyperlink{classcCharDevice_a8378acae0c295100795877bc316fe1a5}{schedule\-Device} (\hyperlink{structProcessInfo}{\-Process\-Info} $\ast$)
\begin{DoxyCompactList}\small\item\em \-Schedule a process for a device interrupt. \end{DoxyCompactList}\item 
\hyperlink{structProcessInfo}{\-Process\-Info} $\ast$ \hyperlink{classcCharDevice_a5d3c8f17cda6545aa1ddf6489c720168}{timer\-Finished} ()
\begin{DoxyCompactList}\small\item\em \-Called when a device timer has gone off. \end{DoxyCompactList}\item 
\hypertarget{classcCharDevice_ae62be6259f092713317c69f4ca385f72}{int \hyperlink{classcCharDevice_ae62be6259f092713317c69f4ca385f72}{queue\-Length} ()}\label{d9/de9/classcCharDevice_ae62be6259f092713317c69f4ca385f72}

\begin{DoxyCompactList}\small\item\em \-Returns the number of devices waiting on the device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Private \-Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcCharDevice_a47c60dbc03d8ba343d42e99e0c5c1317}{queue$<$ \hyperlink{structProcessInfo}{\-Process\-Info} $\ast$ $>$ {\bfseries wait\-Queue}}\label{d9/de9/classcCharDevice_a47c60dbc03d8ba343d42e99e0c5c1317}

\item 
\hypertarget{classcCharDevice_a449c978d56ce1bd377fc4ead7abf362f}{pthread\-\_\-mutex\-\_\-t {\bfseries device\-Lock}}\label{d9/de9/classcCharDevice_a449c978d56ce1bd377fc4ead7abf362f}

\end{DoxyCompactItemize}


\subsection{\-Member \-Function \-Documentation}
\hypertarget{classcCharDevice_a8378acae0c295100795877bc316fe1a5}{\index{c\-Char\-Device@{c\-Char\-Device}!schedule\-Device@{schedule\-Device}}
\index{schedule\-Device@{schedule\-Device}!cCharDevice@{c\-Char\-Device}}
\subsubsection[{schedule\-Device}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf c\-Char\-Device\-::schedule\-Device} (
\begin{DoxyParamCaption}
\item[{{\bf \-Process\-Info} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}\label{d9/de9/classcCharDevice_a8378acae0c295100795877bc316fe1a5}
\-If there are no other waiting processes then schedule the interrupt. \-If there is a pending interrupt then queue the process.


\begin{DoxyParams}{\-Parameters}
{\em \-Process\-Info$\ast$} & \-Process that wants to block on the device. \-This must be saved and returned to the kernel when its interrupt has been received.\\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{\-Warning}
\-This must be synchronized with \hyperlink{classcCharDevice_a5d3c8f17cda6545aa1ddf6489c720168}{timer\-Finished} because signal handlers will cause these methods to be called asynchronously. 
\end{DoxyWarning}


\-Implements \hyperlink{classcAbsQueuedDevice_a529f1c7576d9ec9b87c1d2eb6758c215}{c\-Abs\-Queued\-Device}.



\-Referenced by c\-Kernel\-::boot().

\hypertarget{classcCharDevice_a62b7bd4cb53a35f70798ec18d0340c1e}{\index{c\-Char\-Device@{c\-Char\-Device}!set\-Default\-Time@{set\-Default\-Time}}
\index{set\-Default\-Time@{set\-Default\-Time}!cCharDevice@{c\-Char\-Device}}
\subsubsection[{set\-Default\-Time}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf c\-Char\-Device\-::set\-Default\-Time} (
\begin{DoxyParamCaption}
\item[{int}]{usec}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}\label{d9/de9/classcCharDevice_a62b7bd4cb53a35f70798ec18d0340c1e}
\-Subsequent calls to schedule the device for a process should use this default time. \-This is convenience function. \-A class defined default can be defined statically or in the constructor.


\begin{DoxyParams}{\-Parameters}
{\em int} & usec default microsecond length for device timer. \\
\hline
\end{DoxyParams}


\-Implements \hyperlink{classcAbsQueuedDevice_a57ab7f649c2c40034212627b78476908}{c\-Abs\-Queued\-Device}.

\hypertarget{classcCharDevice_a5d3c8f17cda6545aa1ddf6489c720168}{\index{c\-Char\-Device@{c\-Char\-Device}!timer\-Finished@{timer\-Finished}}
\index{timer\-Finished@{timer\-Finished}!cCharDevice@{c\-Char\-Device}}
\subsubsection[{timer\-Finished}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Process\-Info} $\ast$ {\bf c\-Char\-Device\-::timer\-Finished} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}\label{d9/de9/classcCharDevice_a5d3c8f17cda6545aa1ddf6489c720168}
\-The signal handler in the kernel will call this method when a device's timer has completed. \-The method should then return the waiting process and then schedule an interrupt for the next device queued, if any.

\begin{DoxyReturn}{\-Returns}
\-Process\-Info$\ast$ \-Process that was waiting for the device \-I/\-O to complete. \-It will now be unblocked by the kernel/scheduler.
\end{DoxyReturn}
\begin{DoxyWarning}{\-Warning}
\-Must be synchronized with \hyperlink{classcCharDevice_a8378acae0c295100795877bc316fe1a5}{schedule\-Device}. \-Failing to do so could leave a process blocked indefinitely. 
\end{DoxyWarning}


\-Implements \hyperlink{classcAbsQueuedDevice_a98e8fefe9ef8823c854c6769ab1bef55}{c\-Abs\-Queued\-Device}.



\-The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/devices/\hyperlink{char__device_8h}{char\-\_\-device.\-h}\item 
src/devices/char\-\_\-device.\-cpp\end{DoxyCompactItemize}
